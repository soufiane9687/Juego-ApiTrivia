<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ğŸ ApiTrivial â€” El Juego de la Apicultura</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800;900&family=Nunito:wght@600;700;800;900&display=swap" rel="stylesheet">
<style>
:root {
  --h1: #F59E0B; --h2: #D97706; --h3: #B45309;
  --amber: #FCD34D; --gold: #EAB308;
  --cream: #FFFBEB; --light: #FEF3C7; --pale: #FEF9C3;
  --brown: #78350F; --mid: #92400E; --dark: #451A03;
  --green: #059669; --green-l: #ECFDF5; --green-m: #D1FAE5;
  --red: #DC2626; --red-l: #FEF2F2; --red-m: #FEE2E2;
  --white: #FFFFFF;
  --card-bg: rgba(255,255,255,0.85);
  --card-border: rgba(252,211,77,0.6);
  --shadow-sm: 0 2px 8px rgba(120,53,15,0.12);
  --shadow-md: 0 6px 24px rgba(120,53,15,0.18);
  --shadow-lg: 0 12px 40px rgba(120,53,15,0.25);
  --shadow-xl: 0 20px 60px rgba(120,53,15,0.35);
  --radius-sm: 12px; --radius-md: 18px; --radius-lg: 24px; --radius-xl: 32px;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Nunito', sans-serif;
  min-height: 100vh;
  background: linear-gradient(160deg, #FEF9C3 0%, #FEF3C7 30%, #FDE68A 65%, #FCD34D 100%);
  overflow-x: hidden;
}

/* â”€â”€ ANIMATED HONEYCOMB BG â”€â”€ */
body::before {
  content: '';
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background-image:
    radial-gradient(ellipse at 15% 10%, rgba(245,158,11,0.2) 0%, transparent 45%),
    radial-gradient(ellipse at 85% 15%, rgba(234,179,8,0.15) 0%, transparent 40%),
    radial-gradient(ellipse at 50% 90%, rgba(180,83,9,0.12) 0%, transparent 50%);
  animation: bgShimmer 8s ease-in-out infinite alternate;
}

@keyframes bgShimmer {
  from { opacity: 0.7; }
  to   { opacity: 1; }
}

/* floating honeycomb decoration */
body::after {
  content: 'â¬¡';
  position: fixed;
  font-size: 600px;
  color: rgba(245,158,11,0.04);
  right: -150px; top: -100px;
  z-index: 0; pointer-events: none;
  animation: hexSpin 30s linear infinite;
}
@keyframes hexSpin { to { transform: rotate(360deg); } }

.page {
  position: relative; z-index: 1;
  max-width: 620px;
  margin: 0 auto;
  padding: 24px 16px 60px;
}

/* â”€â”€ HEADER â”€â”€ */
.header {
  text-align: center;
  margin-bottom: 28px;
  animation: slideDown 0.7s cubic-bezier(0.34,1.56,0.64,1) both;
}

.header-badge {
  display: inline-block;
  background: linear-gradient(135deg, var(--h2), var(--h3));
  color: white;
  font-size: 0.7rem;
  font-weight: 900;
  letter-spacing: 2px;
  text-transform: uppercase;
  padding: 4px 16px;
  border-radius: 99px;
  margin-bottom: 10px;
  box-shadow: var(--shadow-sm);
}

.title {
  font-family: 'Baloo 2', cursive;
  font-size: 3.4rem;
  font-weight: 900;
  color: var(--brown);
  line-height: 0.95;
  letter-spacing: -1px;
  text-shadow: 3px 3px 0 rgba(255,255,255,0.5), 0 6px 20px rgba(120,53,15,0.2);
  margin-bottom: 8px;
}

.title .bee { display:inline-block; animation: beeDance 2.5s ease-in-out infinite; }
.title .bee2 { animation-delay: 0.4s; animation-direction: alternate; }

@keyframes beeDance {
  0%,100% { transform: translateY(0) rotate(-5deg); }
  50%      { transform: translateY(-8px) rotate(5deg); }
}

.subtitle {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--mid);
  letter-spacing: 0.5px;
}

/* â”€â”€ CARD BASE â”€â”€ */
.card {
  background: var(--card-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 2px solid var(--card-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  transition: box-shadow 0.3s;
}

.card:hover { box-shadow: var(--shadow-lg); }

/* â”€â”€ SCOREBOARD â”€â”€ */
.scoreboard {
  padding: 16px;
  margin-bottom: 14px;
  animation: slideUp 0.6s cubic-bezier(0.34,1.56,0.64,1) 0.1s both;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.stats-grid + .stats-grid { margin-top: 10px; }

.stat {
  background: linear-gradient(145deg, var(--white), var(--light));
  border-radius: var(--radius-md);
  padding: 12px 8px;
  text-align: center;
  border: 2px solid rgba(252,211,77,0.4);
  transition: transform 0.2s, box-shadow 0.2s;
  cursor: default;
}
.stat:hover { transform: translateY(-3px); box-shadow: var(--shadow-md); }

.stat-icon { font-size: 1.4rem; display: block; margin-bottom: 3px; }
.stat-val {
  font-family: 'Baloo 2', cursive;
  font-size: 1.5rem;
  font-weight: 800;
  color: var(--brown);
  line-height: 1;
  margin-bottom: 2px;
}
.stat-lbl {
  font-size: 0.65rem;
  font-weight: 900;
  color: var(--mid);
  text-transform: uppercase;
  letter-spacing: 0.8px;
}
.stat-combo {
  background: linear-gradient(145deg, #FFF1F2, #FEE2E2);
  border-color: rgba(252,165,165,0.5);
}

/* â”€â”€ PROGRESS â”€â”€ */
.progress-card {
  padding: 14px 18px;
  margin-bottom: 14px;
  animation: slideUp 0.6s cubic-bezier(0.34,1.56,0.64,1) 0.15s both;
}

.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
.progress-label { font-size: 0.75rem; font-weight: 900; color: var(--mid); }
.progress-pct {
  font-family: 'Baloo 2', cursive;
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--h2);
}
.progress-track {
  background: rgba(252,211,77,0.3);
  border-radius: 99px;
  height: 16px;
  overflow: visible;
  position: relative;
  border: 2px solid rgba(252,211,77,0.4);
}
.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--h1) 0%, var(--gold) 50%, var(--h1) 100%);
  background-size: 200% 100%;
  border-radius: 99px;
  transition: width 0.8s cubic-bezier(0.34,1.56,0.64,1);
  position: relative;
  animation: shimmerBar 2s linear infinite;
}
@keyframes shimmerBar {
  0%   { background-position: 0% 0%; }
  100% { background-position: 200% 0%; }
}
.progress-bee {
  position: absolute;
  right: -14px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.4rem;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,0.2));
  animation: beeWobble 1s ease-in-out infinite;
}
@keyframes beeWobble {
  0%,100% { transform: translateY(-50%) rotate(-8deg); }
  50%      { transform: translateY(-60%) rotate(8deg); }
}

/* â”€â”€ BOARD â”€â”€ */
.board-card {
  padding: 16px;
  margin-bottom: 14px;
  animation: slideUp 0.6s cubic-bezier(0.34,1.56,0.64,1) 0.2s both;
}

.board-header {
  text-align: center;
  margin-bottom: 12px;
}
.board-title {
  font-family: 'Baloo 2', cursive;
  font-size: 1rem;
  font-weight: 700;
  color: var(--brown);
  letter-spacing: 0.3px;
}

.board-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 5px;
}

.tile {
  aspect-ratio: 1;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 1.6rem;
  position: relative;
  border: 2px solid transparent;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: default;
  overflow: hidden;
}

.tile::before {
  content: '';
  position: absolute; inset: 0;
  opacity: 0;
  background: radial-gradient(circle at center, rgba(255,255,255,0.5), transparent);
  transition: opacity 0.3s;
}
.tile:hover::before { opacity: 1; }

.tile-number {
  position: absolute;
  top: 3px; left: 4px;
  background: rgba(120,53,15,0.7);
  color: white;
  font-size: 0.55rem;
  font-weight: 900;
  width: 16px; height: 16px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
  line-height: 1;
  z-index: 2;
}

.tile-start  { background: linear-gradient(135deg, #ECFDF5, #D1FAE5); border-color: rgba(16,185,129,0.4); }
.tile-finish { background: linear-gradient(135deg, #D1FAE5, #6EE7B7); border-color: rgba(5,150,105,0.5); box-shadow: 0 0 10px rgba(5,150,105,0.2); }
.tile-question { background: linear-gradient(135deg, #FFFBEB, #FEF9C3); border-color: rgba(252,211,77,0.3); }
.tile-bonus {
  background: linear-gradient(135deg, #FEF9C3, #FDE68A);
  border-color: rgba(234,179,8,0.5);
  box-shadow: 0 2px 8px rgba(234,179,8,0.2);
}
.tile-trap {
  background: linear-gradient(135deg, #FFF1F2, #FEE2E2);
  border-color: rgba(248,113,113,0.4);
}

.tile-active {
  transform: scale(1.15) !important;
  z-index: 10;
  animation: tileGlow 1.2s ease-in-out infinite !important;
}
@keyframes tileGlow {
  0%,100% { box-shadow: 0 0 0 3px var(--h1), 0 0 20px rgba(245,158,11,0.5); border-color: var(--h1); }
  50%      { box-shadow: 0 0 0 5px var(--h1), 0 0 35px rgba(245,158,11,0.8); border-color: var(--gold); }
}

.bee-player {
  position: absolute;
  font-size: 2rem;
  z-index: 20;
  pointer-events: none;
  animation: beeHover 1.6s ease-in-out infinite;
  filter: drop-shadow(0 3px 8px rgba(0,0,0,0.3));
}
@keyframes beeHover {
  0%,100% { transform: translateY(0) scale(1) rotate(-6deg); }
  50%      { transform: translateY(-7px) scale(1.05) rotate(6deg); }
}

/* â”€â”€ DICE SECTION â”€â”€ */
.dice-card {
  padding: 22px 18px;
  margin-bottom: 14px;
  text-align: center;
  animation: slideUp 0.6s cubic-bezier(0.34,1.56,0.64,1) 0.25s both;
}

.dice-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.dice {
  width: 90px; height: 90px;
  background: linear-gradient(145deg, #FFFFFF, #FEF3C7);
  border: 3px solid var(--h1);
  border-radius: 20px;
  display: flex;
  align-items: center; justify-content: center;
  font-family: 'Baloo 2', cursive;
  font-size: 3rem;
  font-weight: 900;
  color: var(--brown);
  cursor: pointer;
  user-select: none;
  box-shadow: 0 6px 0 var(--h2), 0 8px 20px rgba(120,53,15,0.2);
  transition: transform 0.15s, box-shadow 0.15s;
  position: relative;
  overflow: hidden;
}
.dice::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 60%);
  border-radius: 18px;
  pointer-events: none;
}
.dice:hover:not(.rolling) {
  transform: translateY(-5px);
  box-shadow: 0 11px 0 var(--h2), 0 14px 30px rgba(120,53,15,0.25);
}
.dice:active:not(.rolling) {
  transform: translateY(2px);
  box-shadow: 0 3px 0 var(--h2), 0 4px 10px rgba(120,53,15,0.15);
}
.dice.rolling { animation: diceRoll 0.12s linear infinite; }
@keyframes diceRoll {
  0%   { transform: rotate(0deg)   scale(0.92); }
  25%  { transform: rotate(90deg)  scale(1.08); }
  50%  { transform: rotate(180deg) scale(0.92); }
  75%  { transform: rotate(270deg) scale(1.08); }
  100% { transform: rotate(360deg) scale(0.92); }
}

.roll-btn {
  background: linear-gradient(145deg, var(--h1), var(--h2));
  color: white;
  border: none;
  padding: 15px 50px;
  border-radius: 50px;
  font-family: 'Baloo 2', cursive;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 5px 0 var(--h3), 0 8px 20px rgba(120,53,15,0.2);
  transition: transform 0.15s, box-shadow 0.15s;
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
}
.roll-btn::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 60%);
  border-radius: 50px;
}
.roll-btn:hover:not(:disabled) {
  transform: translateY(-4px);
  box-shadow: 0 9px 0 var(--h3), 0 12px 28px rgba(120,53,15,0.25);
}
.roll-btn:active:not(:disabled) {
  transform: translateY(2px);
  box-shadow: 0 2px 0 var(--h3), 0 4px 10px rgba(120,53,15,0.15);
}
.roll-btn:disabled {
  background: linear-gradient(145deg, #D1D5DB, #9CA3AF);
  box-shadow: 0 4px 0 #6B7280;
  cursor: not-allowed;
  opacity: 0.65;
}

/* â”€â”€ RULES â”€â”€ */
.rules-card {
  padding: 20px;
  margin-top: 14px;
  animation: slideUp 0.6s cubic-bezier(0.34,1.56,0.64,1) 0.3s both;
}

.rules-title {
  font-family: 'Baloo 2', cursive;
  font-size: 1.25rem;
  font-weight: 800;
  color: var(--brown);
  margin-bottom: 14px;
  display: flex; align-items: center; gap: 8px;
}

.rule-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  background: linear-gradient(135deg, var(--white), var(--light));
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  margin-bottom: 8px;
  border: 2px solid rgba(252,211,77,0.35);
  font-size: 0.88rem;
  color: var(--brown);
  font-weight: 700;
  line-height: 1.45;
  transition: transform 0.15s, box-shadow 0.15s;
}
.rule-item:hover { transform: translateX(5px); box-shadow: var(--shadow-sm); }
.rule-item:last-of-type { margin-bottom: 0; }
.rule-icon { font-size: 1.2rem; flex-shrink: 0; margin-top: 1px; }

.legend-title {
  font-family: 'Baloo 2', cursive;
  font-size: 1rem;
  font-weight: 700;
  color: var(--brown);
  margin: 18px 0 10px;
  display: flex; align-items: center; gap: 6px;
}

.legend-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 10px;
  background: linear-gradient(135deg, var(--white), var(--light));
  border-radius: 10px;
  padding: 9px 12px;
  border: 2px solid rgba(252,211,77,0.35);
  font-size: 0.82rem;
  font-weight: 700;
  color: var(--brown);
  transition: transform 0.15s;
}
.legend-item:hover { transform: scale(1.03); }
.legend-dot {
  width: 20px; height: 20px; border-radius: 6px;
  flex-shrink: 0; border: 2px solid rgba(0,0,0,0.08);
  box-shadow: inset 0 1px 2px rgba(255,255,255,0.6);
}

/* â”€â”€ COMBO TOAST â”€â”€ */
.combo-toast {
  position: fixed;
  top: 20px; left: 50%;
  transform: translateX(-50%) translateY(-80px);
  background: linear-gradient(135deg, var(--h1), var(--gold));
  color: white;
  padding: 10px 28px;
  border-radius: 50px;
  border: 3px solid rgba(255,255,255,0.5);
  box-shadow: 0 8px 30px rgba(245,158,11,0.5), 0 0 0 1px rgba(255,255,255,0.1);
  z-index: 999;
  text-align: center;
  opacity: 0;
  pointer-events: none;
  transition: all 0.45s cubic-bezier(0.34,1.56,0.64,1);
  backdrop-filter: blur(8px);
}
.combo-toast.show {
  transform: translateX(-50%) translateY(0);
  opacity: 1;
  animation: toastPulse 2s ease-in-out 0.5s infinite;
}
@keyframes toastPulse {
  0%,100% { transform: translateX(-50%) translateY(0) scale(1); }
  50%      { transform: translateX(-50%) translateY(-5px) scale(1.03); }
}
.combo-toast-label { font-weight: 900; font-size: 0.85rem; opacity: 0.9; letter-spacing: 0.5px; }
.combo-toast-num { font-family: 'Baloo 2', cursive; font-size: 1.8rem; font-weight: 900; line-height: 1; }
.combo-toast-bonus { font-size: 0.75rem; font-weight: 700; opacity: 0.85; }

/* â”€â”€ NOTIFICATION â”€â”€ */
.notif {
  position: fixed;
  bottom: 28px; left: 50%;
  transform: translateX(-50%) translateY(60px);
  background: rgba(30,10,0,0.85);
  backdrop-filter: blur(10px);
  color: white;
  padding: 10px 24px;
  border-radius: 50px;
  font-weight: 800;
  font-size: 0.88rem;
  z-index: 9999;
  pointer-events: none;
  transition: all 0.4s cubic-bezier(0.34,1.56,0.64,1);
  opacity: 0;
  border: 1px solid rgba(255,255,255,0.15);
  white-space: nowrap;
}
.notif.show { transform: translateX(-50%) translateY(0); opacity: 1; }

/* â”€â”€ MODALS â”€â”€ */
.modal {
  display: none;
  position: fixed; inset: 0;
  background: rgba(30,10,0,0.7);
  backdrop-filter: blur(6px);
  z-index: 1000;
  padding: 20px;
  overflow-y: auto;
  align-items: center;
  justify-content: center;
}
.modal.show { display: flex; animation: modalFadeIn 0.3s ease; }
@keyframes modalFadeIn { from { opacity:0; } to { opacity:1; } }

.modal-box {
  background: linear-gradient(160deg, #FFFBEB, #FEF3C7);
  border-radius: var(--radius-xl);
  padding: 28px;
  max-width: 480px; width: 100%;
  border: 3px solid var(--amber);
  box-shadow: var(--shadow-xl), 0 0 0 1px rgba(255,255,255,0.4);
  animation: modalPop 0.4s cubic-bezier(0.34,1.56,0.64,1);
  max-height: 92vh;
  overflow-y: auto;
}
@keyframes modalPop {
  from { transform: scale(0.8) translateY(20px); opacity: 0; }
  to   { transform: scale(1) translateY(0); opacity: 1; }
}

/* â”€â”€ QUESTION MODAL â”€â”€ */
.q-top {
  display: flex; align-items: center; justify-content: center;
  gap: 8px; margin-bottom: 18px;
}
.badge {
  padding: 5px 16px;
  border-radius: 50px;
  font-weight: 900;
  font-size: 0.72rem;
  letter-spacing: 0.6px;
  text-transform: uppercase;
}
.badge-easy   { background: linear-gradient(135deg, #059669, #10B981); color:white; }
.badge-medium { background: linear-gradient(135deg, var(--h1), var(--gold)); color:white; }
.badge-hard   { background: linear-gradient(135deg, #DC2626, #EF4444); color:white; }
.badge-pts    { background: linear-gradient(135deg, var(--gold), var(--h1)); color: var(--brown); }

.q-text {
  font-family: 'Baloo 2', cursive;
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--brown);
  text-align: center;
  margin-bottom: 20px;
  line-height: 1.45;
}

.options { display: flex; flex-direction: column; gap: 10px; }

.option {
  display: flex; align-items: center; gap: 12px;
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(8px);
  border-radius: 14px;
  padding: 14px 16px;
  border: 2.5px solid rgba(252,211,77,0.4);
  cursor: pointer;
  transition: all 0.2s ease;
}
.option:hover:not(.disabled) {
  transform: translateX(6px) scale(1.01);
  border-color: var(--h1);
  background: rgba(255,255,255,0.95);
  box-shadow: var(--shadow-md);
}
.option.correct {
  background: var(--green-m);
  border-color: var(--green);
  animation: correctFlash 0.4s ease;
}
@keyframes correctFlash {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.03); }
  100% { transform: scale(1); }
}
.option.wrong {
  background: var(--red-m);
  border-color: var(--red);
  animation: wrongShake 0.4s ease;
}
@keyframes wrongShake {
  0%,100% { transform: translateX(0); }
  25%      { transform: translateX(-6px); }
  75%      { transform: translateX(6px); }
}
.option.disabled { cursor: not-allowed; }

.opt-letter {
  width: 36px; height: 36px;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--h1), var(--h2));
  color: white;
  font-family: 'Baloo 2', cursive;
  font-size: 1.15rem; font-weight: 700;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  transition: background 0.2s;
  box-shadow: 0 2px 6px rgba(245,158,11,0.3);
}
.option.correct .opt-letter { background: linear-gradient(135deg, #059669, #10B981); }
.option.wrong   .opt-letter { background: linear-gradient(135deg, #DC2626, #EF4444); }

.opt-text { font-size: 0.97rem; color: var(--brown); font-weight: 700; flex: 1; }

.result-area { margin-top: 20px; text-align: center; animation: fadeUp 0.4s ease; }

.result-msg {
  font-family: 'Baloo 2', cursive;
  font-size: 1.7rem; font-weight: 800;
  margin-bottom: 6px;
}
.combo-msg { font-size: 0.95rem; font-weight: 800; color: var(--h2); margin-bottom: 14px; }

.explanation-box {
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(8px);
  border-radius: 14px;
  padding: 14px 16px;
  border-left: 4px solid var(--h1);
  text-align: left;
  margin-bottom: 18px;
}
.explanation-box .label { font-size: 0.8rem; font-weight: 900; color: var(--mid); margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.5px; }
.explanation-box p { font-size: 0.88rem; color: var(--brown); line-height: 1.55; font-weight: 600; }

.btn-continue {
  background: linear-gradient(145deg, var(--h1), var(--h2));
  color: white; border: none;
  padding: 13px 40px;
  border-radius: 50px;
  font-family: 'Baloo 2', cursive;
  font-size: 1rem; font-weight: 700;
  cursor: pointer;
  box-shadow: 0 5px 0 var(--h3), 0 8px 20px rgba(120,53,15,0.2);
  transition: transform 0.15s, box-shadow 0.15s;
  position: relative; overflow: hidden;
}
.btn-continue::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.2), transparent 60%);
  border-radius: 50px;
}
.btn-continue:hover { transform: translateY(-3px); box-shadow: 0 8px 0 var(--h3), 0 12px 24px rgba(120,53,15,0.25); }

/* â”€â”€ GAME OVER â”€â”€ */
.go-header { text-align: center; margin-bottom: 22px; }
.go-emoji { font-size: 5rem; display: block; margin-bottom: 10px; animation: bounceIn 0.6s cubic-bezier(0.34,1.56,0.64,1); }
@keyframes bounceIn {
  from { transform: scale(0) rotate(-20deg); opacity: 0; }
  to   { transform: scale(1) rotate(0deg);   opacity: 1; }
}
.go-rank { font-family: 'Baloo 2', cursive; font-size: 2rem; font-weight: 800; margin-bottom: 5px; }
.go-enc { font-size: 0.9rem; font-weight: 700; color: var(--mid); }

.go-score-card {
  border-radius: var(--radius-md);
  padding: 22px;
  text-align: center;
  border: 3px solid;
  margin-bottom: 18px;
  box-shadow: var(--shadow-md);
}
.go-score-lbl { font-size: 0.78rem; font-weight: 900; color: var(--mid); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; }
.go-score-val { font-family: 'Baloo 2', cursive; font-size: 4rem; font-weight: 900; line-height: 1; }

.go-stats { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; margin-bottom: 16px; }
.go-stat {
  background: rgba(255,255,255,0.7);
  border-radius: 14px; padding: 13px 8px;
  text-align: center; border: 2px solid rgba(252,211,77,0.3);
}
.go-stat .stat-icon { font-size: 1.4rem; display:block; margin-bottom:3px; }
.go-stat .stat-val { font-family:'Baloo 2',cursive; font-size:1.4rem; font-weight:800; color:var(--brown); }
.go-stat .stat-lbl { font-size:0.65rem; font-weight:900; color:var(--mid); text-transform:uppercase; letter-spacing:0.8px; }

.achievements-box {
  background: linear-gradient(135deg, rgba(255,255,255,0.8), rgba(254,243,199,0.8));
  border-radius: 16px; padding: 16px;
  margin-bottom: 16px;
  border: 2px solid rgba(252,211,77,0.5);
}
.achievements-box h3 { font-family:'Baloo 2',cursive; font-size:1rem; font-weight:700; color:var(--brown); margin-bottom:10px; text-align:center; }
.ach-item {
  display: flex; align-items: center; gap: 10px;
  background: rgba(255,255,255,0.7); border-radius: 10px;
  padding: 10px 14px; margin-bottom: 8px;
  border: 2px solid rgba(252,211,77,0.3);
  transition: transform 0.2s;
}
.ach-item:hover { transform: translateX(4px); }
.ach-item:last-child { margin-bottom: 0; }
.ach-emoji { font-size: 1.4rem; }
.ach-text { font-weight: 800; color: var(--brown); font-size: 0.88rem; }

.funfact-box {
  background: linear-gradient(135deg, rgba(255,249,195,0.9), rgba(254,243,199,0.9));
  border-radius: 14px; padding: 14px 16px;
  margin-bottom: 18px;
  border-left: 4px solid var(--h1);
}
.funfact-box .label { font-size: 0.78rem; font-weight: 900; color: var(--mid); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }
.funfact-box p { font-size: 0.88rem; color: var(--brown); line-height: 1.55; font-weight: 600; }

.btn-restart {
  width: 100%;
  background: linear-gradient(145deg, var(--h1), var(--h2));
  color: white; border: none;
  padding: 16px; border-radius: 16px;
  font-family: 'Baloo 2', cursive;
  font-size: 1.1rem; font-weight: 700;
  cursor: pointer;
  box-shadow: 0 5px 0 var(--h3), 0 8px 20px rgba(120,53,15,0.2);
  transition: transform 0.15s, box-shadow 0.15s;
  margin-bottom: 12px; position: relative; overflow: hidden;
}
.btn-restart::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.2), transparent 60%);
  border-radius: 16px;
}
.btn-restart:hover { transform: translateY(-3px); box-shadow: 0 8px 0 var(--h3), 0 12px 24px rgba(120,53,15,0.25); }

.footer-note { text-align:center; font-size:0.78rem; font-weight:700; color:var(--mid); }

/* â”€â”€ ANIMATIONS â”€â”€ */
@keyframes slideDown {
  from { opacity:0; transform:translateY(-24px); }
  to   { opacity:1; transform:translateY(0); }
}
@keyframes slideUp {
  from { opacity:0; transform:translateY(20px); }
  to   { opacity:1; transform:translateY(0); }
}
@keyframes fadeUp {
  from { opacity:0; transform:translateY(10px); }
  to   { opacity:1; transform:translateY(0); }
}

@media (max-width: 420px) {
  .title { font-size:2.6rem; }
  .board-grid { gap:3px; }
  .tile { border-radius:8px; font-size:1rem; }
  .tile-number { font-size:0.48rem; width:14px; height:14px; }
  .dice { width:76px; height:76px; font-size:2.4rem; }
}
</style>
</head>
<body>
<div class="page">

  <!-- HEADER -->
  <div class="header">
    <h1 class="title">
      <span class="bee">ğŸ</span> ApiTrivia <span class="bee bee2">ğŸ¯</span>
    </h1>
    <p class="subtitle">El Juego de la Apicultura</p>
  </div>

  <!-- SCOREBOARD -->
  <div class="card scoreboard">
    <div class="stats-grid">
      <div class="stat">
        <span class="stat-icon">ğŸ†</span>
        <div class="stat-val" id="scoreValue">0</div>
        <div class="stat-lbl">Puntos</div>
      </div>
      <div class="stat">
        <span class="stat-icon">â“</span>
        <div class="stat-val" id="questionsValue">0</div>
        <div class="stat-lbl">Preguntas</div>
      </div>
      <div class="stat">
        <span class="stat-icon">ğŸ“</span>
        <div class="stat-val" id="positionValue">1/50</div>
        <div class="stat-lbl">Casilla</div>
      </div>
    </div>
    <div class="stats-grid" id="extraStats" style="display:none">
      <div class="stat">
        <span class="stat-icon">ğŸ¯</span>
        <div class="stat-val" id="accuracyValue">0%</div>
        <div class="stat-lbl">PrecisiÃ³n</div>
      </div>
      <div class="stat stat-combo" id="comboCard" style="display:none">
        <span class="stat-icon">ğŸ”¥</span>
        <div class="stat-val" id="comboValue">x0</div>
        <div class="stat-lbl">Combo</div>
      </div>
    </div>
  </div>

  <!-- PROGRESS -->
  <div class="card progress-card">
    <div class="progress-header">
      <span class="progress-label">ğŸ Inicio</span>
      <span class="progress-pct" id="progressText">1 de 50</span>
      <span class="progress-label">ğŸ¯ Meta</span>
    </div>
    <div class="progress-track">
      <div class="progress-fill" id="progressBar" style="width:2%">
        <span class="progress-bee">ğŸ</span>
      </div>
    </div>
  </div>

  <!-- BOARD -->
  <div class="card board-card">
    <div class="board-header">
      <div class="board-title">ğŸ¯ Tablero ApÃ­cola â€” 30 casillas</div>
    </div>
    <div class="board-grid" id="gameBoard"></div>
  </div>

  <!-- DICE -->
  <div class="card dice-card">
    <div class="dice-wrap">
      <div class="dice" id="dice">ğŸ²</div>
      <button class="roll-btn" id="rollBtn" onclick="rollDice()">ğŸ² Comenzar partida ğŸ</button>
    </div>
  </div>

  <!-- RULES -->
  <div class="card rules-card">
    <div class="rules-title">ğŸ“œ Reglas del Juego</div>

    <div class="rule-item"><span class="rule-icon">ğŸ²</span><span><strong>Objetivo:</strong> Llega a la casilla 30 (META) respondiendo preguntas sobre apicultura.</span></div>
    <div class="rule-item"><span class="rule-icon">ğŸ</span><span><strong>Turnos:</strong> Lanza el dado para avanzar. La abeja se moverÃ¡ automÃ¡ticamente casilla a casilla.</span></div>
    <div class="rule-item"><span class="rule-icon">â“</span><span><strong>Preguntas:</strong> Al caer en casillas blancas, responde correctamente para ganar puntos.</span></div>
    <div class="rule-item"><span class="rule-icon">ğŸ”¥</span><span><strong>Combos:</strong> Responde bien seguido para multiplicar tus puntos (+2 pts por nivel de combo).</span></div>
    <div class="rule-item"><span class="rule-icon">âš ï¸</span><span><strong>Trampas:</strong> Pierdes 10 puntos y se rompe tu combo.</span></div>
    <div class="rule-item"><span class="rule-icon">ğŸ†</span><span><strong>PuntuaciÃ³n:</strong> FÃ¡cil (10 pts), Media (15 pts), DifÃ­cil (20 pts) + bonus de combo.</span></div>

    <div class="legend-title">ğŸ—ºï¸ Tipos de Casillas</div>
    <div class="legend-grid">
      <div class="legend-item"><div class="legend-dot" style="background:linear-gradient(135deg,#FFFBEB,#FEF9C3)"></div><span>â“ Pregunta</span></div>
      <div class="legend-item"><div class="legend-dot" style="background:linear-gradient(135deg,#FEF9C3,#FDE68A)"></div><span>ğŸ¯ Bonus +15</span></div>
      <div class="legend-item"><div class="legend-dot" style="background:linear-gradient(135deg,#FFF1F2,#FEE2E2)"></div><span>ğŸğŸ’¨ Pregunta para expertos +20, +1 Saltar casilla</span></div>
      <div class="legend-item"><div class="legend-dot" style="background:linear-gradient(135deg,#ECFDF5,#D1FAE5)"></div><span>ğŸ Inicio / Meta</span></div>
    </div>
  </div>

</div>

<!-- COMBO TOAST -->
<div class="combo-toast" id="comboToast">
  <div class="combo-toast-label" id="comboLabel">Â¡EN RACHA! ğŸ’«</div>
  <div class="combo-toast-num"   id="comboNumber">x3 COMBO</div>
  <div class="combo-toast-bonus" id="comboBonus">+6 pts extra</div>
</div>

<!-- NOTIFICATION -->
<div class="notif" id="notif"></div>

<!-- QUESTION MODAL -->
<div class="modal" id="questionModal">
  <div class="modal-box">
    <div class="q-top">
      <span style="font-size:1.8rem">ğŸ</span>
      <span class="badge" id="difficultyBadge">FÃ¡cil</span>
      <span class="badge badge-pts" id="pointsBadge">+10 pts</span>
    </div>
    <div class="q-text" id="questionText"></div>
    <div class="options" id="optionsContainer"></div>
    <div class="result-area" id="resultContainer" style="display:none">
      <div class="result-msg" id="resultText"></div>
      <div class="combo-msg"  id="comboKeepText" style="display:none"></div>
      <div class="explanation-box">
        <div class="label">ğŸ“š ExplicaciÃ³n</div>
        <p id="explanationText"></p>
      </div>
      <button class="btn-continue" onclick="continueGame()">Continuar â†’</button>
    </div>
  </div>
</div>

<!-- GAME OVER MODAL -->
<div class="modal" id="gameOverModal">
  <div class="modal-box">
    <div class="go-header">
      <span class="go-emoji" id="rankEmoji">ğŸ¯</span>
      <div class="go-rank" id="rankTitle">Aprendiz de Apicultor</div>
      <div class="go-enc"  id="encouragement">Â¡Sigue aprendiendo! ğŸŒ±</div>
    </div>
    <div class="go-score-card" id="mainScoreCard" style="background:linear-gradient(135deg,#FFFBEB,#FEF3C7)">
      <div class="go-score-lbl">PuntuaciÃ³n Final</div>
      <div class="go-score-val" id="finalScore">0</div>
    </div>
    <div class="go-stats">
      <div class="go-stat"><span class="stat-icon">ğŸ¯</span><div class="stat-val" id="finalAccuracy">0%</div><div class="stat-lbl">PrecisiÃ³n</div></div>
      <div class="go-stat"><span class="stat-icon">ğŸ”¥</span><div class="stat-val" id="finalMaxCombo">x0</div><div class="stat-lbl">Mejor Combo</div></div>
      <div class="go-stat"><span class="stat-icon">â­</span><div class="stat-val" id="finalCorrect">0</div><div class="stat-lbl">Correctas</div></div>
    </div>
    <div class="achievements-box" id="achievementsContainer" style="display:none">
      <h3>ğŸ† Logros Desbloqueados</h3>
      <div id="achievementsList"></div>
    </div>
    <div class="funfact-box">
      <div class="label">ğŸ Dato Curioso</div>
      <p id="funFactText"></p>
    </div>
    <button class="btn-restart" onclick="restartGame()">ğŸ”„ Jugar de Nuevo</button>
  </div>
</div>

<script>
// â”€â”€ AUDIO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const AC = new (window.AudioContext || window.webkitAudioContext)();
function playSound(type) {
  try {
    const o = AC.createOscillator(), g = AC.createGain();
    o.connect(g); g.connect(AC.destination);
    const t = AC.currentTime;
    switch(type) {
      case 'dice':
        o.frequency.setValueAtTime(300,t); o.frequency.exponentialRampToValueAtTime(600,t+0.1);
        g.gain.setValueAtTime(0.3,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.15);
        o.start(t); o.stop(t+0.15); break;
      case 'move':
        o.frequency.setValueAtTime(480,t); o.type='sine';
        g.gain.setValueAtTime(0.12,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.07);
        o.start(t); o.stop(t+0.07); break;
      case 'correct':
        o.frequency.setValueAtTime(523,t); o.frequency.setValueAtTime(659,t+0.1); o.frequency.setValueAtTime(784,t+0.2); o.type='sine';
        g.gain.setValueAtTime(0.3,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.4);
        o.start(t); o.stop(t+0.4); break;
      case 'wrong':
        o.frequency.setValueAtTime(400,t); o.frequency.exponentialRampToValueAtTime(200,t+0.3); o.type='sawtooth';
        g.gain.setValueAtTime(0.2,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.3);
        o.start(t); o.stop(t+0.3); break;
      case 'bonus':
        o.frequency.setValueAtTime(800,t); o.frequency.setValueAtTime(1000,t+0.05); o.type='sine';
        g.gain.setValueAtTime(0.3,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.2);
        o.start(t); o.stop(t+0.2); break;
      case 'trap':
        o.frequency.setValueAtTime(150,t); o.type='sawtooth';
        g.gain.setValueAtTime(0.25,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.25);
        o.start(t); o.stop(t+0.25); break;
      case 'combo':
        [0,0.05,0.1,0.15].forEach((d,i)=>o.frequency.setValueAtTime([523,659,784,1047][i],t+d)); o.type='sine';
        g.gain.setValueAtTime(0.3,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.3);
        o.start(t); o.stop(t+0.3); break;
      case 'gameover':
        o.frequency.setValueAtTime(523,t); o.frequency.setValueAtTime(392,t+0.15); o.frequency.setValueAtTime(523,t+0.3); o.type='square';
        g.gain.setValueAtTime(0.3,t); g.gain.exponentialRampToValueAtTime(0.01,t+0.5);
        o.start(t); o.stop(t+0.5); break;
    }
  } catch(e){}
}

// â”€â”€ NOTIFICATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showNotif(msg) {
  const el = document.getElementById('notif');
  el.textContent = msg;
  el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'), 2400);
}

// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let gs = {
  pos:0, score:0, answered:0, correct:0,
  combo:0, maxCombo:0,
  rolling:false, over:false,
  usedIds:[], question:null
};

// â”€â”€ QUESTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const Q = [
  {id:1,q:'Â¿CuÃ¡ntas alas tiene una abeja?',opts:['2 alas','4 alas','6 alas','8 alas'],ans:1,pts:10,dif:'easy',exp:'Las abejas tienen 4 alas: dos grandes delanteras y dos mÃ¡s pequeÃ±as traseras. Las alas se enganchan entre sÃ­ durante el vuelo para mayor eficiencia.'},
  {id:2,q:'Â¿CÃ³mo se llama la sustancia que producen las abejas para construir el panal?',opts:['Miel','PropÃ³leo','Cera','Polen'],ans:2,pts:10,dif:'easy',exp:'La cera es secretada por glÃ¡ndulas especiales en el abdomen de las abejas obreras. Necesitan consumir aproximadamente 8 kg de miel para producir 1 kg de cera.'},
  {id:3,q:'Â¿CuÃ¡l es la funciÃ³n principal de la abeja reina?',opts:['Recolectar nÃ©ctar','Defender la colmena','Poner huevos','Producir miel'],ans:2,pts:10,dif:'easy',exp:'La abeja reina es la Ãºnica hembra fÃ©rtil de la colmena. Puede poner hasta 2,000 huevos al dÃ­a y vive entre 3 a 5 aÃ±os.'},
  {id:4,q:'Â¿CuÃ¡ntos ojos tiene una abeja en total?',opts:['2 ojos','3 ojos','4 ojos','5 ojos'],ans:3,pts:15,dif:'medium',exp:'Las abejas tienen 5 ojos: 2 ojos compuestos grandes para detectar movimiento y colores, y 3 ojos simples (ocelos) en la parte superior para detectar la luz.'},
  {id:5,q:'Â¿QuÃ© tipo de danza realizan las abejas para comunicar la ubicaciÃ³n de las flores?',opts:['Danza circular','Danza del ocho','Danza zigzag','Danza espiral'],ans:1,pts:15,dif:'medium',exp:'La danza del ocho o "waggle dance" indica direcciÃ³n y distancia de las flores. El Ã¡ngulo respecto al sol indica direcciÃ³n, y la duraciÃ³n del movimiento indica distancia.'},
  {id:6,q:'Â¿CuÃ¡nto tiempo vive aproximadamente una abeja obrera en verano?',opts:['1 semana','6 semanas','6 meses','1 aÃ±o'],ans:1,pts:15,dif:'medium',exp:'En verano, las obreras viven solo 6 semanas debido al intenso trabajo de recolecciÃ³n. En invierno pueden vivir hasta 6 meses ya que su actividad es menor.'},
  {id:7,q:'Â¿QuÃ© es el propÃ³leo?',opts:['Miel fermentada','Resina antibacteriana','Polen procesado','Cera lÃ­quida'],ans:1,pts:15,dif:'medium',exp:'El propÃ³leo es una resina que las abejas recolectan de los Ã¡rboles y mezclan con cera. Tiene propiedades antibacterianas y lo usan para sellar y desinfectar la colmena.'},
  {id:8,q:'Â¿CuÃ¡ntas flores debe visitar una abeja para producir 1 kg de miel?',opts:['100.000','500.000','2 millones','4 millones'],ans:3,pts:20,dif:'hard',exp:'Para producir 1 kg de miel, las abejas deben visitar aproximadamente 4 millones de flores y volar una distancia equivalente a dar 4 vueltas a la Tierra.'},
  {id:9,q:'Â¿QuÃ© es la jalea real?',opts:['Miel especial','SecreciÃ³n glandular para la reina','Polen mezclado','Cera refinada'],ans:1,pts:20,dif:'hard',exp:'La jalea real es una secreciÃ³n de las glÃ¡ndulas hipofarÃ­ngeas de las abejas nodrizas. Es el alimento exclusivo de la reina durante toda su vida y lo que la diferencia de las obreras.'},
  {id:10,q:'Â¿CÃ³mo se llama el proceso de separar la miel de la cera?',opts:['Desoperculado','Centrifugado','Filtrado','DecantaciÃ³n'],ans:1,pts:20,dif:'hard',exp:'El centrifugado extrae la miel de los panales mediante fuerza centrÃ­fuga. Antes se realiza el desoperculado (quitar los opÃ©rculos de cera) para que la miel pueda salir.'},
  {id:11,q:'Â¿QuÃ© nombre recibe el apicultor novato?',opts:['Aprendiz','Colmenero','Meliponicultor','Principiante apÃ­cola'],ans:0,pts:10,dif:'easy',exp:'El aprendiz de apicultor trabaja bajo la supervisiÃ³n de un apicultor experimentado. Es fundamental aprender las tÃ©cnicas correctas para el manejo seguro de las colmenas.'},
  {id:12,q:'Â¿CuÃ¡l es el enemigo natural mÃ¡s comÃºn de las abejas?',opts:['Hormigas','Varroa','Avispas','AraÃ±as'],ans:1,pts:15,dif:'medium',exp:'La Varroa destructor es un Ã¡caro parÃ¡sito que se alimenta de las abejas y transmite virus. Es considerada la mayor amenaza para la apicultura mundial.'},
  {id:13,q:'Â¿QuÃ© es un enjambre?',opts:['Grupo de abejas que abandona la colmena','Tipo de colmena','Herramienta apÃ­cola','Enfermedad de abejas'],ans:0,pts:10,dif:'easy',exp:'El enjambre es la forma natural de reproducciÃ³n de las colonias. La reina vieja parte con miles de obreras para formar una nueva colonia, dejando una nueva reina.'},
  {id:14,q:'Â¿CuÃ¡ntas abejas puede haber en una colmena fuerte?',opts:['5.000','20.000','60.000','100.000'],ans:2,pts:15,dif:'medium',exp:'Una colmena fuerte en temporada alta puede albergar entre 50,000 y 80,000 abejas. En invierno, la poblaciÃ³n se reduce a unas 10,000-20,000.'},
  {id:15,q:'Â¿QuÃ© herramienta usa el apicultor para calmar a las abejas?',opts:['Cepillo','Ahumador','EspÃ¡tula','CentrÃ­fuga'],ans:1,pts:10,dif:'easy',exp:'El ahumador produce humo que hace que las abejas consuman miel pensando que hay un incendio, volviÃ©ndose mÃ¡s dÃ³ciles. TambiÃ©n enmascara las feromonas de alarma.'},
  {id:16,q:'Â¿A quÃ© temperatura mantienen las abejas el interior de la colmena?',opts:['25Â°C','30Â°C','35Â°C','40Â°C'],ans:2,pts:20,dif:'hard',exp:'Las abejas mantienen la zona de crÃ­a a exactamente 35Â°C. En verano ventilan con sus alas, y en invierno generan calor vibrando los mÃºsculos de vuelo.'},
  {id:17,q:'Â¿QuÃ© porcentaje de la alimentaciÃ³n humana depende de la polinizaciÃ³n de las abejas?',opts:['10%','30%','50%','70%'],ans:2,pts:15,dif:'medium',exp:'Aproximadamente el 50% de los cultivos que consumimos dependen de la polinizaciÃ³n de abejas. Frutas, verduras y frutos secos serÃ­an escasos sin ellas.'},
  {id:18,q:'Â¿Cual es la causa principal del fenomeno conocido como problema del colapso de las colmenas segun el consenso cientifico actual??',opts:['El uso exclusivo de glifosato en campos de cereales','Una conbinaciÃ³n sinÃ©rgica de patÃ³ginos, pesticidas y estrÃ©s nutricional','La interferencia de las ondas de radiofrecuencia es un sistema de navegaciÃ³n','El aumento de la poblaciÃ³n de avispones asiÃ¡ticos a nivel global'],ans:2,pts:20,dif:'hard',exp:'El problema de colapso de las colmenas no tiene un Ãºnico culpable se produce cuando factores como el Ã¡caro varroa, el hongo Nosema y los neonicotinoides debilitan a la colonia simultaneamente.'},
  {id:19,q:'Â¿QuÃ© velocidad puede alcanzar una abeja en vuelo?',opts:['10 km/h','25 km/h','40 km/h','60 km/h'],ans:1,pts:15,dif:'medium',exp:'Las abejas vuelan a unos 25 km/h en promedio, batiendo sus alas unas 200 veces por segundo. Pueden recorrer hasta 5 km desde la colmena para buscar alimento.'},
  {id:20,q:'Â¿CuÃ¡l es la mejor Ã©poca para cosechar miel?',opts:['Primavera','Verano/OtoÃ±o','Invierno','Todo el aÃ±o'],ans:1,pts:15,dif:'medium',exp:'La mejor Ã©poca es a finales del verano u otoÃ±o, cuando las abejas han acumulado reservas. Siempre se debe dejar suficiente miel para que sobrevivan el invierno.'},
  {id:21,q:'Â¿QuÃ© color NO pueden ver las abejas?',opts:['Rojo','Azul','Amarillo','Violeta'],ans:0,pts:10,dif:'easy',exp:'Las abejas no pueden ver el color rojo, pero pueden ver luz ultravioleta que los humanos no percibimos. Por eso muchas flores tienen patrones UV.'},
  {id:22,q:'Â¿CuÃ¡ntos zÃ¡nganos puede tener una colmena?',opts:['Ninguno','Entre 200 y 500','Entre 1000 y 2000','MÃ¡s de 5000'],ans:1,pts:15,dif:'medium',exp:'Los zÃ¡nganos (machos) son entre 200 y 500 en temporada alta. Su Ãºnica funciÃ³n es fecundar a la reina. No recolectan nÃ©ctar ni polen.'},
  {id:23,q:'Â¿QuÃ© parte de la flor buscan las abejas?',opts:['PÃ©talos','NÃ©ctar y polen','RaÃ­z','Tallo'],ans:1,pts:10,dif:'easy',exp:'Las abejas buscan el nÃ©ctar (lÃ­quido azucarado) y el polen (proteÃ­nas) de las flores. El nÃ©ctar se transforma en miel y el polen alimenta las larvas.'},
  {id:24,q:'Â¿CuÃ¡nto pesa aproximadamente una abeja obrera?',opts:['50 miligramos','100 miligramos','200 miligramos','500 miligramos'],ans:1,pts:20,dif:'hard',exp:'Una abeja obrera pesa aproximadamente 100 miligramos. Puede cargar nÃ©ctar y polen equivalente a su propio peso corporal.'},
  {id:25,q:'Â¿Las abejas pueden reconocer rostros humanos?',opts:['SÃ­','No','Solo algunas especies','Solo la reina'],ans:0,pts:15,dif:'medium',exp:'Estudios cientÃ­ficos han demostrado que las abejas pueden aprender a reconocer rostros humanos y distinguir entre diferentes caras.'},
  {id:26,q:'Â¿QuÃ© es el aguijÃ³n de una abeja?',opts:['Una aguja hueca','Un Ã³rgano de defensa modificado','Una extensiÃ³n del aparato digestivo','Un sensor'],ans:1,pts:20,dif:'hard',exp:'El aguijÃ³n es un ovipositor (Ã³rgano de puesta de huevos) modificado. Por eso solo las hembras (obreras y reina) tienen aguijÃ³n. Los zÃ¡nganos no.'},
  {id:27,q:'Â¿QuÃ© sucede con una abeja despuÃ©s de picar a un humano?',opts:['Nada, puede picar varias veces','Muere porque pierde el aguijÃ³n','Se debilita pero sobrevive','Pierde las alas'],ans:1,pts:10,dif:'easy',exp:'La abeja muere despuÃ©s de picar a mamÃ­feros porque su aguijÃ³n tiene pÃºas que se quedan enganchadas en la piel elÃ¡stica, arrancando parte de su abdomen.'},
  {id:28,q:'Â¿CuÃ¡ntas veces bate sus alas una abeja por segundo?',opts:['50 veces','100 veces','200 veces','400 veces'],ans:2,pts:15,dif:'medium',exp:'Las abejas baten sus alas aproximadamente 200 veces por segundo, lo que produce su caracterÃ­stico zumbido y les permite volar a gran velocidad.'},
  {id:29,q:'Â¿QuÃ© es la "danza de limpieza" en las abejas?',opts:['Cuando se limpian entre ellas','Un ritual de apareamiento','Una forma de comunicar peligro','Un comportamiento de higiene de la colmena'],ans:3,pts:20,dif:'hard',exp:'Las abejas realizan comportamientos de limpieza muy sofisticados para mantener la colmena libre de parÃ¡sitos, restos y mantener condiciones higiÃ©nicas Ã³ptimas.'},
  {id:30,q:'Â¿CuÃ¡l es el depredador mÃ¡s peligroso para las abejas en Asia?',opts:['Osos','AvispÃ³n gigante asiÃ¡tico','AraÃ±as','PÃ¡jaros'],ans:1,pts:20,dif:'hard',exp:'El avispÃ³n gigante asiÃ¡tico (Vespa mandarinia) puede destruir colmenas enteras. Un solo avispÃ³n puede matar 40 abejas por minuto.'},
  
];

// â”€â”€ TILES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const tiles = [];
const specials = {
  0:{type:'start',label:'ğŸ'}, 30:{type:'finish',label:'ğŸ¯'},
  5:{type:'bonus',label:'ğŸ¯'}, 10:{type:'bonus',label:'ğŸŒ»'}, 15:{type:'bonus',label:'ğŸ¯'},
  20:{type:'bonus',label:'ğŸŒ¼'}, 25:{type:'bonus',label:'ğŸ¯'}, 30:{type:'bonus',label:'ğŸŒ¸'},
};

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function initGame() {
  for (let i=0;i<50;i++)
    tiles.push(specials[i] ? {id:i,...specials[i]} : {id:i,type:'question',label:'â“'});
  renderBoard();
  updateUI();
}

// â”€â”€ RENDER BOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderBoard() {
  const board = document.getElementById('gameBoard');
  board.innerHTML = '';
  for (let row=0;row<10;row++) {
    const row_tiles = tiles.slice(row*5,(row+1)*5);
    if (row%2===1) row_tiles.reverse();
    row_tiles.forEach((tile,i) => {
      const div = document.createElement('div');
      div.className = `tile tile-${tile.type}`;
      div.id = `tile-${tile.id}`;
      div.style.animationDelay = `${(row*5+i)*0.02}s`;

      const num = document.createElement('div');
      num.className = 'tile-number';
      num.textContent = tile.id+1;
      div.appendChild(num);

      const lbl = document.createElement('div');
      lbl.textContent = tile.label;
      div.appendChild(lbl);

      if (tile.id === gs.pos) {
        const bee = document.createElement('div');
        bee.className = 'bee-player';
        const bees = ['ğŸ','ğŸ','ğŸ','ğŸ','ğŸ','ğŸ'];
        bee.textContent = bees[tile.id % bees.length];
        div.appendChild(bee);
        div.classList.add('tile-active');
      }
      board.appendChild(div);
    });
  }
}

// â”€â”€ UPDATE UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateUI() {
  document.getElementById('scoreValue').textContent = gs.score;
  document.getElementById('questionsValue').textContent = gs.answered;
  document.getElementById('positionValue').textContent = `${gs.pos+1}/50`;

  const pct = Math.max(2, Math.round((gs.pos/49)*100));
  document.getElementById('progressBar').style.width = pct+'%';
  document.getElementById('progressText').textContent = `${gs.pos+1} de 50`;

  if (gs.answered > 0) {
    document.getElementById('extraStats').style.display = 'grid';
    document.getElementById('accuracyValue').textContent =
      Math.round((gs.correct/gs.answered)*100)+'%';
  }
  if (gs.combo > 0) {
    document.getElementById('comboCard').style.display = 'block';
    document.getElementById('comboValue').textContent = `x${gs.combo}`;
    if (gs.combo >= 3) showComboToast();
  } else {
    document.getElementById('comboCard').style.display = 'none';
    hideComboToast();
  }
}

function showComboToast() {
  const lbl = gs.combo>=10?'Â¡LEGENDARIO! ğŸŒŸ':gs.combo>=7?'Â¡INCREÃBLE! ğŸ”¥':gs.combo>=5?'Â¡EXCELENTE! âš¡':'Â¡EN RACHA! ğŸ’«';
  document.getElementById('comboLabel').textContent = lbl;
  document.getElementById('comboNumber').textContent = `x${gs.combo} COMBO`;
  document.getElementById('comboBonus').textContent = `+${gs.combo*2} pts extra`;
  document.getElementById('comboToast').classList.add('show');
}
function hideComboToast() { document.getElementById('comboToast').classList.remove('show'); }

// â”€â”€ DICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function rollDice() {
  if (gs.rolling || gs.over) return;
  gs.rolling = true;
  const dice = document.getElementById('dice');
  const btn  = document.getElementById('rollBtn');
  dice.classList.add('rolling');
  btn.disabled = true;
  playSound('dice');
  let n=0;
  const iv = setInterval(()=>{
    dice.textContent = Math.floor(Math.random()*6)+1;
    if(++n>=12){
      clearInterval(iv);
      const val = Math.floor(Math.random()*6)+1;
      dice.textContent = val;
      dice.classList.remove('rolling');
      setTimeout(()=>{ movePlayer(val); gs.rolling=false; btn.disabled=false; }, 280);
    }
  }, 90);
}

// â”€â”€ MOVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function movePlayer(steps) {
  const from = gs.pos;
  gs.pos = Math.min(from+steps, 49);
  animateBee(from, gs.pos, ()=>{
    updateUI();
    setTimeout(()=>handleTile(tiles[gs.pos]), 300);
  });
}

function animateBee(from, to, cb) {
  if (from===to) { renderBoard(); cb&&cb(); return; }
  let pos = from;
  const iv = setInterval(()=>{
    pos++;
    playSound('move');
    document.querySelectorAll('.bee-player').forEach(b=>b.remove());
    document.querySelectorAll('.tile').forEach(t=>t.classList.remove('tile-active'));
    const el = document.getElementById(`tile-${pos}`);
    if (el) {
      const bee = document.createElement('div');
      bee.className = 'bee-player';
      const bees = ['ğŸ','ğŸ','ğŸ','ğŸ','ğŸ','ğŸ'];
      bee.textContent = bees[pos % bees.length];
      el.appendChild(bee);
      el.classList.add('tile-active');
      el.scrollIntoView({behavior:'smooth',block:'nearest'});
    }
    if (pos>=to) { clearInterval(iv); cb&&cb(); }
  }, 270);
}

// â”€â”€ TILE ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function handleTile(tile) {
  switch(tile.type) {
    case 'question': showQuestion(); break;
    case 'bonus':
      playSound('bonus');
      gs.score += 15;
      showNotif('ğŸ¯ Â¡Bonus! +15 puntos');
      updateUI(); break;
    case 'trap':
      playSound('trap');
      gs.score = Math.max(0, gs.score-10);
      gs.combo = 0;
      showNotif('ğŸğŸ’¨ Â¡Trampa! -10 puntos');
      updateUI(); break;
    case 'finish':
      gs.over = true;
      setTimeout(()=>{ playSound('gameover'); showGameOver(); }, 600);
      break;
  }
}

// â”€â”€ QUESTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showQuestion() {
  const avail = Q.filter(q=>!gs.usedIds.includes(q.id));
  if (!avail.length) { gs.over=true; showGameOver(); return; }

  gs.question = avail[Math.floor(Math.random()*avail.length)];
  gs.usedIds.push(gs.question.id);

  const q = gs.question;
  document.getElementById('questionText').textContent = q.q;

  const badge = document.getElementById('difficultyBadge');
  badge.className = `badge badge-${q.dif}`;
  badge.textContent = q.dif==='easy'?'FÃ¡cil':q.dif==='medium'?'Media':'DifÃ­cil';
  document.getElementById('pointsBadge').textContent = `+${q.pts + gs.combo*2} pts`;

  const c = document.getElementById('optionsContainer');
  c.innerHTML = '';
  q.opts.forEach((opt,i)=>{
    const div = document.createElement('div');
    div.className = 'option';
    div.id = `opt-${i}`;
    div.innerHTML = `<div class="opt-letter">${String.fromCharCode(65+i)}</div><div class="opt-text">${opt}</div>`;
    div.onclick = ()=>pick(i);
    c.appendChild(div);
  });

  document.getElementById('questionModal').classList.add('show');
  document.getElementById('resultContainer').style.display = 'none';
}

function pick(idx) {
  document.querySelectorAll('.option').forEach(o=>{ o.classList.add('disabled'); o.onclick=null; });
  document.getElementById(`opt-${idx}`).classList.add('selected');
  setTimeout(()=>grade(idx), 380);
}

function grade(idx) {
  const correct = idx === gs.question.ans;
  document.querySelectorAll('.option')[gs.question.ans].classList.add('correct');
  if (!correct) document.getElementById(`opt-${idx}`).classList.add('wrong');

  playSound(correct ? (gs.combo>=2?'combo':'correct') : 'wrong');
  gs.answered++;

  if (correct) {
    const pts = gs.question.pts + gs.combo*2;
    gs.score += pts;
    gs.correct++;
    gs.combo++;
    if (gs.combo > gs.maxCombo) gs.maxCombo = gs.combo;
    document.getElementById('resultText').textContent = 'Â¡Correcto! ğŸ‰';
    document.getElementById('resultText').style.color = '#059669';
    if (gs.combo > 1) {
      document.getElementById('comboKeepText').style.display = 'block';
      document.getElementById('comboKeepText').textContent = `ğŸ”¥ Â¡Combo continÃºa! x${gs.combo}`;
    } else {
      document.getElementById('comboKeepText').style.display = 'none';
    }
  } else {
    gs.combo = 0;
    document.getElementById('resultText').textContent = 'Â¡Incorrecto! ğŸ˜¢';
    document.getElementById('resultText').style.color = '#DC2626';
    document.getElementById('comboKeepText').style.display = 'none';
  }

  document.getElementById('explanationText').textContent = gs.question.exp;
  document.getElementById('resultContainer').style.display = 'block';
  updateUI();
}

function continueGame() {
  document.getElementById('questionModal').classList.remove('show');
  if (gs.pos >= 49) { gs.over=true; setTimeout(()=>showGameOver(), 400); }
}

// â”€â”€ GAME OVER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showGameOver() {
  const acc = gs.answered>0 ? Math.round((gs.correct/gs.answered)*100) : 0;
  const ranks = [
    {min:300,emoji:'ğŸ‘‘',title:'Maestro Apicultor',color:'#EAB308'},
    {min:200,emoji:'ğŸŒŸ',title:'Experto en Abejas',color:'#9C27B0'},
    {min:150,emoji:'âš¡',title:'Apicultor Avanzado',color:'#F59E0B'},
    {min:100,emoji:'ğŸ',title:'Apicultor Competente',color:'#059669'},
    {min:0,  emoji:'ğŸ¯',title:'Aprendiz de Apicultor',color:'#D97706'},
  ];
  const rank = ranks.find(r=>gs.score>=r.min);

  document.getElementById('rankEmoji').textContent = rank.emoji;
  document.getElementById('rankTitle').textContent  = rank.title;
  document.getElementById('rankTitle').style.color  = rank.color;
  document.getElementById('mainScoreCard').style.borderColor = rank.color;
  document.getElementById('finalScore').textContent = gs.score;
  document.getElementById('finalScore').style.color = rank.color;

  const msgs = [[90,'Â¡Conocimiento apÃ­cola de Ã©lite! ğŸ“'],[60,'Â¡Buen intento! Puedes mejorar ğŸ“š'],[0,'Â¡Sigue aprendiendo sobre apicultura! ğŸŒ±']];
  document.getElementById('encouragement').textContent = msgs.find(([t])=>acc>=t)[1];
  document.getElementById('finalAccuracy').textContent = `${acc}%`;
  document.getElementById('finalMaxCombo').textContent = `x${gs.maxCombo}`;
  document.getElementById('finalCorrect').textContent  = gs.correct;

  const achs = [];
  if (gs.maxCombo>=10) achs.push({e:'ğŸ”¥',t:'Racha Legendaria x10'});
  if (gs.maxCombo>=5)  achs.push({e:'âš¡',t:'Racha Impresionante x5'});
  if (acc===100)       achs.push({e:'ğŸ¯',t:'PrecisiÃ³n Perfecta'});
  if (gs.correct>=15)  achs.push({e:'ğŸ“š',t:'Erudito de Abejas'});
  if (gs.score>=300)   achs.push({e:'ğŸ‘‘',t:'PuntuaciÃ³n MÃ¡xima'});

  const ac = document.getElementById('achievementsContainer');
  if (achs.length) {
    ac.style.display='block';
    document.getElementById('achievementsList').innerHTML =
      achs.map(a=>`<div class="ach-item"><span class="ach-emoji">${a.e}</span><span class="ach-text">${a.t}</span></div>`).join('');
  } else ac.style.display='none';

  const facts = [
    'Una abeja reina puede poner hasta 2,000 huevos al dÃ­a, mÃ¡s que su propio peso corporal.',
    'Las abejas llevan produciendo miel durante mÃ¡s de 150 millones de aÃ±os.',
    'Para 500 g de miel, las abejas visitan 2 millones de flores y vuelan 88,500 km.',
    'Las abejas pueden reconocer rostros humanos igual que nosotros.',
    'El zumbido de una abeja son sus alas batiendo 11,400 veces por minuto.',
    'Una colonia de abejas puede producir hasta 45 kg de miel en un aÃ±o.',
    'Se ha encontrado miel comestible de 3,000 aÃ±os en tumbas egipcias gracias al propÃ³leo.',
  ];
  document.getElementById('funFactText').textContent = facts[Math.floor(Math.random()*facts.length)];
  document.getElementById('gameOverModal').classList.add('show');
}

// â”€â”€ RESTART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function restartGame() {
  gs = {pos:0,score:0,answered:0,correct:0,combo:0,maxCombo:0,rolling:false,over:false,usedIds:[],question:null};
  document.getElementById('gameOverModal').classList.remove('show');
  document.getElementById('questionModal').classList.remove('show');
  document.getElementById('extraStats').style.display = 'none';
  document.getElementById('progressBar').style.width = '2%';
  tiles.length = 0;
  initGame();
}

initGame();
</script>
</body>
</html>
